<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ÙØ±Ù… Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ</title>
  <style>
    body{font-family:tahoma,arial,sans-serif;margin:0;background:#fff;color:#111}
    .wrap{max-width:560px;margin:32px auto;padding:0 16px}
    .card{border:1px solid #eee;border-radius:16px;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,.04);background:#fff}
    h1{font-size:20px;margin:0 0 8px}
    label{display:block;margin:12px 0 6px}
    select,button{width:100%;padding:12px;border-radius:10px;border:1px solid #ddd;font-size:16px}
    .row{display:flex;gap:12px;margin-top:12px}
    .btn{flex:1;cursor:pointer}
    .muted{color:#666;font-size:12px;margin-top:8px}
    .ok{background:#f1fff1;border-color:#b8e6b8}
    .err{background:#fff2f2;border-color:#f1b5b5}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ</h1>
      <p>Ø¨Ø®Ø´ ÙØ¹Ù„ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ Ùˆ Ø±Ø£ÛŒ Ø¯Ù‡ÛŒØ¯.</p>

      <label for="section">Ø¨Ø®Ø´ Ø§Ø±Ø§Ø¦Ù‡</label>
      <select id="section">
        <option>Intro</option>
        <option>Toyota vs Amazon</option>
        <option>Pre-control</option>
        <option>Digital Jidoka</option>
        <option>Bayes Rule</option>
        <option>Live Demo</option>
      </select>

      <label>Ø±Ø¶Ø§ÛŒØª</label>
      <div class="row">
        <button class="btn" onclick="submitVote(1)">ğŸ‘ Ø®ÙˆØ¨ Ø¨ÙˆØ¯</button>
        <button class="btn" onclick="submitVote(0)">ğŸ‘ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ù‡Ø¨ÙˆØ¯</button>
      </div>
      <p id="msg" class="muted"></p>
      <hr style="margin:20px 0">
      <p class="muted">Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ: ÙÙ‚Ø· Ø¨Ø®Ø´ Ùˆ Ø±Ø£ÛŒ Ø´Ù…Ø§ Ø«Ø¨Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯Ø› Ù†Ø§Ù…/Ø§ÛŒÙ…ÛŒÙ„ Ù„Ø§Ø²Ù… Ù†ÛŒØ³Øª.</p>
    </div>
  </div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyNS70MUtt7kIq7PtsmlE6k71dut1-L_OrsBk-uWmLNYMNRe6HZGSZP2EzWAKDRqjb45w/exec";

async function submitVote(score){
  const section = document.getElementById('section').value;
  const msg = document.getElementById('msg');
  msg.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„...';
  msg.className = 'muted';

  try{
    // Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡â€ŒØµÙˆØ±Øª text/plain Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² preflight
    const r = await fetch(WEB_APP_URL, {
      method: 'POST',
      headers: {'Content-Type':'text/plain;charset=utf-8'},
      body: JSON.stringify({section, score, session:'class'})
    });

    const text = await r.text();
    let js; try{ js = JSON.parse(text) } catch { js = {ok:false} }

    if(js && js.ok){
      msg.textContent = 'âœ… Ø«Ø¨Øª Ø´Ø¯. Ù…Ù…Ù†ÙˆÙ†!';
      msg.className = 'muted ok';
    }else{
      msg.textContent = 'â›” Ù¾Ø§Ø³Ø® Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø² Ø³Ø±ÙˆØ±.';
      msg.className = 'muted err';
      console.error('Server response:', text);
    }
  }catch(e){
    msg.textContent = 'â›” Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø±Ù‚Ø±Ø§Ø± Ù†Ø´Ø¯.';
    msg.className = 'muted err';
    console.error(e);
  }
}
</script>
</body>
</html>
